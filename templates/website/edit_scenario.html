<!-- edit_scenario.html -->
{% extends 'website/base.html' %}

{% block title %}Edit Scenario{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Edit Scenario: <input type="text" value="{{ scenario.version }}" readonly></h2>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="version" value="{{ scenario.version }}">
        <div class="form-group">
            <label for="scenario_description">Description:</label>
            <textarea id="scenario_description" name="scenario_description"
                class="form-control">{{ scenario.scenario_description }}</textarea>
        </div>
        <div class="form-group">
            <label for="created_by">Created By:</label>
            <input type="text" id="created_by" name="created_by" value="{{ scenario.created_by }}" class="form-control">
        </div>
        <div class="form-group">
            <label for="creation_date">Creation Date:</label>
            <input type="text" id="creation_date" name="creation_date" value="{{ scenario.creation_date }}"
                class="form-control" readonly>
        </div>
        <div class="form-group">
            <label for="open_to_update">Open to Update:</label>
            <input type="checkbox" id="open_to_update" name="open_to_update" {% if scenario.open_to_update %}checked{%
                endif %}>
        </div>
        <div class="form-group">
            <label for="visible_to_users">Visible to Users:</label>
            <input type="checkbox" id="visible_to_users" name="visible_to_users" {% if scenario.visible_to_users
                %}checked{% endif %}>
        </div>
        <div class="form-group">
            <label for="approval1">Approval 1:</label>
            <input type="checkbox" id="approval1" name="approval1" {% if scenario.approval1 %}checked{% endif %}>
        </div>
        <div class="form-group">
            <label for="approval2">Approval 2:</label>
            <input type="checkbox" id="approval2" name="approval2" {% if scenario.approval2 %}checked{% endif %}>
        </div>
        <div class="form-group">
            <label for="approval3">Approval 3:</label>
            <input type="checkbox" id="approval3" name="approval3" {% if scenario.approval3 %}checked{% endif %}>
        </div>
        <button type="submit" name="edit_scenario" class="btn btn-primary">Save Scenario</button>
    </form>
    <hr>
    <h3>Scenario Checklist</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Item</th>
                <th>Has Data</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Forecast from SMART</td>
                <td>
                    <input type="checkbox" checked readonly>
                </td>
                <td>
                    <button type="button" class="btn btn-warning btn-sm"
                        onclick="window.location.href='{% url 'edit_forecasts' scenario.version 'SMART' %}'">
                        <img src="/static/icons/update.png" alt="Update"> <!-- Update this path to your update icon -->
                    </button>
                    <button type="button" class="btn btn-danger btn-sm">
                        <img src="/static/icons/delete.png" alt="Delete">
                        <!-- Update this path to your delete icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal"
                        data-bs-target="#uploadModalSMART">
                        <img src="/static/icons/upload.png" alt="Upload">
                        <!-- Update this path to your upload icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm">
                        <img src="/static/icons/copy.png" alt="Copy"> <!-- Update this path to your copy icon -->
                    </button>
                </td>
            </tr>
            <tr>
                <td>Forecast not in SMART</td>
                <td>
                    <input type="checkbox" readonly>
                </td>
                <td>
                    <button type="button" class="btn btn-warning btn-sm"
                        onclick="window.location.href='{% url 'edit_forecasts' scenario.version 'Not in SMART' %}'">
                        <img src="/static/icons/update.png" alt="Update"> <!-- Update this path to your update icon -->
                    </button>
                    <button type="button" class="btn btn-danger btn-sm">
                        <img src="/static/icons/delete.png" alt="Delete"> <!-- Update this path to your delete icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal"
                        data-bs-target="#uploadModalNotInSMART">
                        <img src="/static/icons/upload.png" alt="Upload"> <!-- Update this path to your upload icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm">
                        <img src="/static/icons/copy.png" alt="Copy"> <!-- Update this path to your copy icon -->
                    </button>
                </td>
            </tr>
            {% for model in models %}
            <tr>
                <td>{{ model.name }}</td>
                <td>
                    <input type="checkbox" {% if model.has_data %}checked{% endif %} disabled>
                </td>
                <td>
                    <button type="button" class="btn btn-warning btn-sm">
                        <img src="/static/icons/update.png" alt="Update"> <!-- Update this path to your update icon -->
                    </button>
                    <button type="button" class="btn btn-danger btn-sm">
                        <img src="/static/icons/delete.png" alt="Delete"> <!-- Update this path to your delete icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal"
                        data-bs-target="#uploadModalSMART">
                        <img src="/static/icons/upload.png" alt="Upload"> <!-- Update this path to your upload icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm">
                        <img src="/static/icons/copy.png" alt="Copy"> <!-- Update this path to your copy icon -->
                    </button>
                    <button type="button" class="btn btn-info btn-sm" data-bs-toggle="modal"
                        data-bs-target="#uploadModalNotInSMART">
                        <img src="/static/icons/upload.png" alt="Forecast">
                        <!-- Update this path to your forecast icon -->
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Modal for SMART Forecast -->
    <div class="modal fade" id="uploadModalSMART" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabelSMART"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadModalLabelSMART">Upload File</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form method="post" action="{% url 'upload_forecast' 'SMART' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="version" value="{{ scenario.version }}">
                        <div class="form-group">
                            <label for="file">Choose file:</label>
                            <input type="file" id="file" name="file" class="form-control-file">
                        </div>
                        <button type="submit" class="btn btn-primary">Upload</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Not in SMART Forecast -->

    <div class="modal fade" id="uploadModalNotInSMART" tabindex="-1" role="dialog"
        aria-labelledby="uploadModalLabelNotInSMART" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadModalLabelNotInSMART">Upload File</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form method="post" action="{% url 'upload_forecast' 'Not in SMART' %}"
                        enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" name="version" value="{{ scenario.version }}">
                        <div class="form-group">
                            <label for="file">Choose file:</label>
                            <input type="file" id="file" name="file" class="form-control-file">
                        </div>
                </div>
                <button type="submit" class="btn btn-primary">Upload</button>
                </form>
            </div>
        </div>
    </div>

</div>
</div>
{% endblock %}