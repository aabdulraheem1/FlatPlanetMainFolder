<style>
    /* Style for the checkbox to make the tick blue */
    input[type="checkbox"]:checked {
        accent-color: blue;
        /* Modern browsers support this */
    }

    .table th,
    .table td {
        text-align: center;
        /* Center-align content in all columns */
        vertical-align: middle;
        /* Vertically align content in the middle */
    }

    .table th:nth-child(2),
    .table td:nth-child(2) {
        width: 15%;
        /* Set a fixed width for the "Has Data" column */
    }

    .table th:nth-child(3),
    .table td:nth-child(3) {
        width: 35%;
        /* Set a fixed width for the "Actions" column */
    }

    .table img {
        width: 20px;
        /* Set a consistent size for icons */
        height: 20px;
    }

    .btn {
        margin: 2px;
        /* Add spacing between buttons */
    }
</style>

<!-- Master Data from Epicor -->
<h3>Master Data from Epicor</h3>
<table class="table">
    <thead>
        <tr>
            <th>Item</th>
            <th>Has Data</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Product allocation based on order book</td>
            <td>
                <!-- Checkbox dynamically ticked based on database records -->
                <input type="checkbox" {% if product_allocation_order_book %}checked{% endif %} disabled>
            </td>
            <td>
                <a href="{% url 'update_product_allocation' scenario.version %}" class="btn btn-warning btn-sm"
                    onclick="showLoading('Updating records...');">
                    <img src="/static/icons/update.png" alt="Update">
                </a>
                <a href="{% url 'delete_product_allocation' scenario.version %}" class="btn btn-danger btn-sm"
                    onclick="return confirmDelete();">
                    <img src="/static/icons/delete.png" alt="Delete">
                </a>
                <a href="{% url 'upload_product_allocation' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Uploading records...');">
                    <img src="/static/icons/upload.png" alt="Upload">
                </a>
                <a href="{% url 'copy_product_allocation' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Copying records...');">
                    <img src="/static/icons/copy.png" alt="Copy">
                </a>
            </td>
        </tr>
        <tr>
            <td>Production Allocation based on pouring history</td>
            <td>
                <!-- Checkbox dynamically ticked based on database records -->
                <input type="checkbox" {% if production_allocation_pouring_history %}checked{% endif %} disabled>
            </td>
            <td>
                <a href="{% url 'update_production_history' scenario.version %}" class="btn btn-warning btn-sm"
                    onclick="showLoading('Updating records...');">
                    <img src="/static/icons/update.png" alt="Update">
                </a>
                <a href="{% url 'delete_production_history' scenario.version %}" class="btn btn-danger btn-sm"
                    onclick="return confirmDelete();">
                    <img src="/static/icons/delete.png" alt="Delete">
                </a>
                <a href="{% url 'upload_production_history' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Uploading records...');">
                    <img src="/static/icons/upload.png" alt="Upload">
                </a>
                <a href="{% url 'copy_production_history' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Copying records...');">
                    <img src="/static/icons/copy.png" alt="Copy">
                </a>
            </td>
        </tr>
        <tr>
            <td>Production Allocation based on Epicor Master Data</td>
            <td>
                <!-- Checkbox dynamically ticked based on database records -->
                <input type="checkbox" {% if production_allocation_epicor_master_data %}checked{% endif %} disabled>
            </td>
            <td>
                <a href="{% url 'update_production_epicor_master_data' scenario.version %}"
                    class="btn btn-warning btn-sm" onclick="showLoading('Updating records...');">
                    <img src="/static/icons/update.png" alt="Update">
                </a>
                <a href="{% url 'delete_production_epicor_master_data' scenario.version %}"
                    class="btn btn-danger btn-sm" onclick="return confirmDelete();">
                    <img src="/static/icons/delete.png" alt="Delete">
                </a>
                <a href="{% url 'upload_production_epicor_master_data' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Uploading records...');">
                    <img src="/static/icons/upload.png" alt="Upload">
                </a>
                <a href="{% url 'copy_production_epicor_master_data' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Copying records...');">
                    <img src="/static/icons/copy.png" alt="Copy">
                </a>
            </td>
        </tr>
        <tr>
            <td>On Hand Stock and In Transit from Epicor</td>
            <td>
                <!-- Checkbox dynamically ticked based on database records -->
                <input type="checkbox" {% if on_hand_stock_in_transit %}checked{% endif %} disabled>
            </td>
            <td>
                <a href="{% url 'update_on_hand_stock' scenario.version %}" class="btn btn-warning btn-sm"
                    onclick="showLoading('Updating records...');">
                    <img src="/static/icons/update.png" alt="Update">
                </a>
                <a href="{% url 'delete_on_hand_stock' scenario.version %}" class="btn btn-danger btn-sm"
                    onclick="return confirmDelete();">
                    <img src="/static/icons/delete.png" alt="Delete">
                </a>
                <a href="{% url 'upload_on_hand_stock' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Uploading records...');">
                    <img src="/static/icons/upload.png" alt="Upload">
                </a>
                <a href="{% url 'copy_on_hand_stock' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Copying records...');">
                    <img src="/static/icons/copy.png" alt="Copy">
                </a>
            </td>
        </tr>
        <tr>
    <td>Products Cost from Epicor</td>
    <td>
        <!-- Checkbox dynamically ticked based on database records -->
        <input type="checkbox" {% if products_cost_from_epicor %}checked{% endif %} disabled>
    </td>
    <td>
        <a href="{% url 'update_products_cost' scenario.version %}" class="btn btn-warning btn-sm"
            onclick="showLoading('Updating records...');">
            <img src="/static/icons/update.png" alt="Update">
        </a>
        <a href="{% url 'delete_products_cost' scenario.version %}" class="btn btn-danger btn-sm"
            onclick="return confirmDelete();">
            <img src="/static/icons/delete.png" alt="Delete">
        </a>
        <a href="{% url 'upload_products_cost' scenario.version %}" class="btn btn-info btn-sm"
            onclick="showLoading('Uploading records...');">
            <img src="/static/icons/upload.png" alt="Upload">
        </a>
        <a href="{% url 'copy_products_cost' scenario.version %}" class="btn btn-info btn-sm"
            onclick="showLoading('Copying records...');">
            <img src="/static/icons/copy.png" alt="Copy">
        </a>
    </td>
    </tr>
    <tr>
            <td>Safety Stocks Setup</td>
            <td>
                <!-- Checkbox dynamically ticked based on database records -->
                <input type="checkbox" {% if safety_stocks_has_data %}checked{% endif %} disabled>
            </td>
            <td>
                <a href="{% url 'update_safety_stocks' scenario.version %}" class="btn btn-warning btn-sm"
                    onclick="showLoading('Updating records...');">
                    <img src="/static/icons/update.png" alt="Update">
                </a>
                <a href="{% url 'delete_safety_stocks' scenario.version %}" class="btn btn-danger btn-sm"
                    onclick="return confirmDelete();">
                    <img src="/static/icons/delete.png" alt="Delete">
                </a>
                <a href="{% url 'upload_safety_stocks' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Uploading records...');">
                    <img src="/static/icons/upload.png" alt="Upload">
                </a>
                <a href="{% url 'copy_safety_stocks' scenario.version %}" class="btn btn-info btn-sm"
                    onclick="showLoading('Copying records...');">
                    <img src="/static/icons/copy.png" alt="Copy">
                </a>
            </td>
        </tr>

    </tbody>
</table>

<script>
    function showLoading(message) {
        const loadingOverlay = document.createElement('div');
        loadingOverlay.id = 'loading-overlay';
        loadingOverlay.style.position = 'fixed';
        loadingOverlay.style.top = '0';
        loadingOverlay.style.left = '0';
        loadingOverlay.style.width = '100%';
        loadingOverlay.style.height = '100%';
        loadingOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
        loadingOverlay.style.color = 'white';
        loadingOverlay.style.display = 'flex';
        loadingOverlay.style.justifyContent = 'center';
        loadingOverlay.style.alignItems = 'center';
        loadingOverlay.style.zIndex = '1000';
        loadingOverlay.innerHTML = `<div><span>${message}</span><br><img src="/static/icons/spinner.gif" alt="Loading..."></div>`;
        document.body.appendChild(loadingOverlay);
    }

    function hideLoading() {
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
            loadingOverlay.remove();
        }
    }

    function confirmDelete() {
        const confirmed = confirm('Are you sure you want to delete all records for this scenario?');
        if (confirmed) {
            showLoading('Deleting records...');
        }
        return confirmed;
    }
</script>